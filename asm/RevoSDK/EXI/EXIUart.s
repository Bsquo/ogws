.include "macros.inc"

.section .sbss, "wa"
.balign 0x8
Enabled:
	.skip 0x4
BarnacleEnabled:
	.skip 0x4
Dev:
	.skip 0x4
Chan:
	.skip 0x4

.section .text, "ax"
.global ProbeBarnacle
ProbeBarnacle:
/* 800D93B0 000D42B0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800D93B4 000D42B4  7C 08 02 A6 */	mflr r0
/* 800D93B8 000D42B8  2C 03 00 02 */	cmpwi r3, 2
/* 800D93BC 000D42BC  90 01 00 24 */	stw r0, 0x24(r1)
/* 800D93C0 000D42C0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800D93C4 000D42C4  7C BF 2B 78 */	mr r31, r5
/* 800D93C8 000D42C8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800D93CC 000D42CC  7C 9E 23 78 */	mr r30, r4
/* 800D93D0 000D42D0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800D93D4 000D42D4  7C 7D 1B 78 */	mr r29, r3
/* 800D93D8 000D42D8  93 81 00 10 */	stw r28, 0x10(r1)
/* 800D93DC 000D42DC  41 82 00 24 */	beq lbl_800D9400
/* 800D93E0 000D42E0  2C 04 00 00 */	cmpwi r4, 0
/* 800D93E4 000D42E4  40 82 00 1C */	bne lbl_800D9400
/* 800D93E8 000D42E8  38 80 00 00 */	li r4, 0
/* 800D93EC 000D42EC  4B FF F0 B9 */	bl EXIAttach
/* 800D93F0 000D42F0  2C 03 00 00 */	cmpwi r3, 0
/* 800D93F4 000D42F4  40 82 00 0C */	bne lbl_800D9400
/* 800D93F8 000D42F8  38 60 00 00 */	li r3, 0
/* 800D93FC 000D42FC  48 00 01 0C */	b lbl_800D9508
lbl_800D9400:
/* 800D9400 000D4300  7F A3 EB 78 */	mr r3, r29
/* 800D9404 000D4304  7F C4 F3 78 */	mr r4, r30
/* 800D9408 000D4308  38 A0 00 00 */	li r5, 0
/* 800D940C 000D430C  4B FF F9 FD */	bl EXILock
/* 800D9410 000D4310  7C 60 00 34 */	cntlzw r0, r3
/* 800D9414 000D4314  54 1C D9 7F */	rlwinm. r28, r0, 0x1b, 5, 0x1f
/* 800D9418 000D4318  40 82 00 B4 */	bne lbl_800D94CC
/* 800D941C 000D431C  7F A3 EB 78 */	mr r3, r29
/* 800D9420 000D4320  7F C4 F3 78 */	mr r4, r30
/* 800D9424 000D4324  38 A0 00 00 */	li r5, 0
/* 800D9428 000D4328  4B FF F2 4D */	bl EXISelect
/* 800D942C 000D432C  7C 60 00 34 */	cntlzw r0, r3
/* 800D9430 000D4330  54 1C D9 7F */	rlwinm. r28, r0, 0x1b, 5, 0x1f
/* 800D9434 000D4334  40 82 00 90 */	bne lbl_800D94C4
/* 800D9438 000D4338  3C 80 20 01 */	lis r4, 0x20011300@ha
/* 800D943C 000D433C  7F A3 EB 78 */	mr r3, r29
/* 800D9440 000D4340  38 04 13 00 */	addi r0, r4, 0x20011300@l
/* 800D9444 000D4344  38 A0 00 04 */	li r5, 4
/* 800D9448 000D4348  90 01 00 08 */	stw r0, 8(r1)
/* 800D944C 000D434C  38 81 00 08 */	addi r4, r1, 8
/* 800D9450 000D4350  38 C0 00 01 */	li r6, 1
/* 800D9454 000D4354  38 E0 00 00 */	li r7, 0
/* 800D9458 000D4358  4B FF E7 B5 */	bl EXIImm
/* 800D945C 000D435C  7C 60 00 34 */	cntlzw r0, r3
/* 800D9460 000D4360  7F A3 EB 78 */	mr r3, r29
/* 800D9464 000D4364  54 1C D9 7E */	srwi r28, r0, 5
/* 800D9468 000D4368  4B FF EB BD */	bl EXISync
/* 800D946C 000D436C  7C 60 00 34 */	cntlzw r0, r3
/* 800D9470 000D4370  7F A3 EB 78 */	mr r3, r29
/* 800D9474 000D4374  54 00 D9 7E */	srwi r0, r0, 5
/* 800D9478 000D4378  7F E4 FB 78 */	mr r4, r31
/* 800D947C 000D437C  7F 9C 03 78 */	or r28, r28, r0
/* 800D9480 000D4380  38 A0 00 04 */	li r5, 4
/* 800D9484 000D4384  38 C0 00 00 */	li r6, 0
/* 800D9488 000D4388  38 E0 00 00 */	li r7, 0
/* 800D948C 000D438C  4B FF E7 81 */	bl EXIImm
/* 800D9490 000D4390  7C 60 00 34 */	cntlzw r0, r3
/* 800D9494 000D4394  7F A3 EB 78 */	mr r3, r29
/* 800D9498 000D4398  54 00 D9 7E */	srwi r0, r0, 5
/* 800D949C 000D439C  7F 9C 03 78 */	or r28, r28, r0
/* 800D94A0 000D43A0  4B FF EB 85 */	bl EXISync
/* 800D94A4 000D43A4  7C 60 00 34 */	cntlzw r0, r3
/* 800D94A8 000D43A8  7F A3 EB 78 */	mr r3, r29
/* 800D94AC 000D43AC  54 00 D9 7E */	srwi r0, r0, 5
/* 800D94B0 000D43B0  7F 9C 03 78 */	or r28, r28, r0
/* 800D94B4 000D43B4  4B FF F2 F1 */	bl EXIDeselect
/* 800D94B8 000D43B8  7C 60 00 34 */	cntlzw r0, r3
/* 800D94BC 000D43BC  54 00 D9 7E */	srwi r0, r0, 5
/* 800D94C0 000D43C0  7F 9C 03 78 */	or r28, r28, r0
lbl_800D94C4:
/* 800D94C4 000D43C4  7F A3 EB 78 */	mr r3, r29
/* 800D94C8 000D43C8  4B FF FA 3D */	bl EXIUnlock
lbl_800D94CC:
/* 800D94CC 000D43CC  2C 1D 00 02 */	cmpwi r29, 2
/* 800D94D0 000D43D0  41 82 00 14 */	beq lbl_800D94E4
/* 800D94D4 000D43D4  2C 1E 00 00 */	cmpwi r30, 0
/* 800D94D8 000D43D8  40 82 00 0C */	bne lbl_800D94E4
/* 800D94DC 000D43DC  7F A3 EB 78 */	mr r3, r29
/* 800D94E0 000D43E0  4B FF F0 DD */	bl EXIDetach
lbl_800D94E4:
/* 800D94E4 000D43E4  2C 1C 00 00 */	cmpwi r28, 0
/* 800D94E8 000D43E8  41 82 00 0C */	beq lbl_800D94F4
/* 800D94EC 000D43EC  38 60 00 00 */	li r3, 0
/* 800D94F0 000D43F0  48 00 00 18 */	b lbl_800D9508
lbl_800D94F4:
/* 800D94F4 000D43F4  80 9F 00 00 */	lwz r4, 0(r31)
/* 800D94F8 000D43F8  20 64 FF FF */	subfic r3, r4, -1
/* 800D94FC 000D43FC  38 04 00 01 */	addi r0, r4, 1
/* 800D9500 000D4400  7C 60 03 78 */	or r0, r3, r0
/* 800D9504 000D4404  54 03 0F FE */	srwi r3, r0, 0x1f
lbl_800D9508:
/* 800D9508 000D4408  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800D950C 000D440C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800D9510 000D4410  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800D9514 000D4414  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800D9518 000D4418  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800D951C 000D441C  7C 08 03 A6 */	mtlr r0
/* 800D9520 000D4420  38 21 00 20 */	addi r1, r1, 0x20
/* 800D9524 000D4424  4E 80 00 20 */	blr 

.global __OSEnableBarnacle
__OSEnableBarnacle:
/* 800D9528 000D4428  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800D952C 000D442C  7C 08 02 A6 */	mflr r0
/* 800D9530 000D4430  90 01 00 24 */	stw r0, 0x24(r1)
/* 800D9534 000D4434  38 A1 00 08 */	addi r5, r1, 8
/* 800D9538 000D4438  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800D953C 000D443C  7C 9F 23 78 */	mr r31, r4
/* 800D9540 000D4440  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800D9544 000D4444  7C 7E 1B 78 */	mr r30, r3
/* 800D9548 000D4448  4B FF FA BD */	bl EXIGetID
/* 800D954C 000D444C  2C 03 00 00 */	cmpwi r3, 0
/* 800D9550 000D4450  41 82 01 7C */	beq lbl_800D96CC
/* 800D9554 000D4454  80 81 00 08 */	lwz r4, 8(r1)
/* 800D9558 000D4458  3C 00 01 02 */	lis r0, 0x102
/* 800D955C 000D445C  7C 04 00 00 */	cmpw r4, r0
/* 800D9560 000D4460  41 82 01 6C */	beq lbl_800D96CC
/* 800D9564 000D4464  40 80 00 94 */	bge lbl_800D95F8
/* 800D9568 000D4468  2C 04 00 04 */	cmpwi r4, 4
/* 800D956C 000D446C  41 82 01 60 */	beq lbl_800D96CC
/* 800D9570 000D4470  40 80 00 54 */	bge lbl_800D95C4
/* 800D9574 000D4474  3C 60 80 00 */	lis r3, 0x80000010@ha
/* 800D9578 000D4478  38 03 00 10 */	addi r0, r3, 0x80000010@l
/* 800D957C 000D447C  7C 04 00 00 */	cmpw r4, r0
/* 800D9580 000D4480  41 82 01 4C */	beq lbl_800D96CC
/* 800D9584 000D4484  40 80 00 24 */	bge lbl_800D95A8
/* 800D9588 000D4488  38 03 00 08 */	addi r0, r3, 8
/* 800D958C 000D448C  7C 04 00 00 */	cmpw r4, r0
/* 800D9590 000D4490  41 82 01 3C */	beq lbl_800D96CC
/* 800D9594 000D4494  40 80 01 08 */	bge lbl_800D969C
/* 800D9598 000D4498  38 03 00 04 */	addi r0, r3, 4
/* 800D959C 000D449C  7C 04 00 00 */	cmpw r4, r0
/* 800D95A0 000D44A0  41 82 01 2C */	beq lbl_800D96CC
/* 800D95A4 000D44A4  48 00 00 F8 */	b lbl_800D969C
lbl_800D95A8:
/* 800D95A8 000D44A8  2C 04 FF FF */	cmpwi r4, -1
/* 800D95AC 000D44AC  41 82 01 20 */	beq lbl_800D96CC
/* 800D95B0 000D44B0  40 80 00 EC */	bge lbl_800D969C
/* 800D95B4 000D44B4  38 03 00 20 */	addi r0, r3, 0x20
/* 800D95B8 000D44B8  7C 04 00 00 */	cmpw r4, r0
/* 800D95BC 000D44BC  41 82 01 10 */	beq lbl_800D96CC
/* 800D95C0 000D44C0  48 00 00 DC */	b lbl_800D969C
lbl_800D95C4:
/* 800D95C4 000D44C4  2C 04 00 20 */	cmpwi r4, 0x20
/* 800D95C8 000D44C8  41 82 01 04 */	beq lbl_800D96CC
/* 800D95CC 000D44CC  40 80 00 1C */	bge lbl_800D95E8
/* 800D95D0 000D44D0  2C 04 00 10 */	cmpwi r4, 0x10
/* 800D95D4 000D44D4  41 82 00 F8 */	beq lbl_800D96CC
/* 800D95D8 000D44D8  40 80 00 C4 */	bge lbl_800D969C
/* 800D95DC 000D44DC  2C 04 00 08 */	cmpwi r4, 8
/* 800D95E0 000D44E0  41 82 00 EC */	beq lbl_800D96CC
/* 800D95E4 000D44E4  48 00 00 B8 */	b lbl_800D969C
lbl_800D95E8:
/* 800D95E8 000D44E8  3C 00 01 01 */	lis r0, 0x101
/* 800D95EC 000D44EC  7C 04 00 00 */	cmpw r4, r0
/* 800D95F0 000D44F0  41 82 00 DC */	beq lbl_800D96CC
/* 800D95F4 000D44F4  48 00 00 A8 */	b lbl_800D969C
lbl_800D95F8:
/* 800D95F8 000D44F8  3C 60 04 04 */	lis r3, 0x04040404@ha
/* 800D95FC 000D44FC  38 03 04 04 */	addi r0, r3, 0x04040404@l
/* 800D9600 000D4500  7C 04 00 00 */	cmpw r4, r0
/* 800D9604 000D4504  41 82 00 C8 */	beq lbl_800D96CC
/* 800D9608 000D4508  40 80 00 58 */	bge lbl_800D9660
/* 800D960C 000D450C  3C 60 04 02 */	lis r3, 0x04020100@ha
/* 800D9610 000D4510  38 03 01 00 */	addi r0, r3, 0x04020100@l
/* 800D9614 000D4514  7C 04 00 00 */	cmpw r4, r0
/* 800D9618 000D4518  41 82 00 B4 */	beq lbl_800D96CC
/* 800D961C 000D451C  40 80 00 24 */	bge lbl_800D9640
/* 800D9620 000D4520  3C 00 03 01 */	lis r0, 0x301
/* 800D9624 000D4524  7C 04 00 00 */	cmpw r4, r0
/* 800D9628 000D4528  41 82 00 A4 */	beq lbl_800D96CC
/* 800D962C 000D452C  40 80 00 70 */	bge lbl_800D969C
/* 800D9630 000D4530  3C 00 02 02 */	lis r0, 0x202
/* 800D9634 000D4534  7C 04 00 00 */	cmpw r4, r0
/* 800D9638 000D4538  41 82 00 94 */	beq lbl_800D96CC
/* 800D963C 000D453C  48 00 00 60 */	b lbl_800D969C
lbl_800D9640:
/* 800D9640 000D4540  38 03 03 00 */	addi r0, r3, 0x300
/* 800D9644 000D4544  7C 04 00 00 */	cmpw r4, r0
/* 800D9648 000D4548  41 82 00 84 */	beq lbl_800D96CC
/* 800D964C 000D454C  40 80 00 50 */	bge lbl_800D969C
/* 800D9650 000D4550  38 03 02 00 */	addi r0, r3, 0x200
/* 800D9654 000D4554  7C 04 00 00 */	cmpw r4, r0
/* 800D9658 000D4558  41 82 00 74 */	beq lbl_800D96CC
/* 800D965C 000D455C  48 00 00 40 */	b lbl_800D969C
lbl_800D9660:
/* 800D9660 000D4560  3C 00 04 13 */	lis r0, 0x413
/* 800D9664 000D4564  7C 04 00 00 */	cmpw r4, r0
/* 800D9668 000D4568  41 82 00 64 */	beq lbl_800D96CC
/* 800D966C 000D456C  40 80 00 24 */	bge lbl_800D9690
/* 800D9670 000D4570  3C 00 04 12 */	lis r0, 0x412
/* 800D9674 000D4574  7C 04 00 00 */	cmpw r4, r0
/* 800D9678 000D4578  41 82 00 54 */	beq lbl_800D96CC
/* 800D967C 000D457C  40 80 00 20 */	bge lbl_800D969C
/* 800D9680 000D4580  3C 00 04 06 */	lis r0, 0x406
/* 800D9684 000D4584  7C 04 00 00 */	cmpw r4, r0
/* 800D9688 000D4588  41 82 00 44 */	beq lbl_800D96CC
/* 800D968C 000D458C  48 00 00 10 */	b lbl_800D969C
lbl_800D9690:
/* 800D9690 000D4590  3C 00 04 22 */	lis r0, 0x422
/* 800D9694 000D4594  7C 04 00 00 */	cmpw r4, r0
/* 800D9698 000D4598  41 82 00 34 */	beq lbl_800D96CC
lbl_800D969C:
/* 800D969C 000D459C  7F C3 F3 78 */	mr r3, r30
/* 800D96A0 000D45A0  7F E4 FB 78 */	mr r4, r31
/* 800D96A4 000D45A4  38 A1 00 08 */	addi r5, r1, 8
/* 800D96A8 000D45A8  4B FF FD 09 */	bl ProbeBarnacle
/* 800D96AC 000D45AC  2C 03 00 00 */	cmpwi r3, 0
/* 800D96B0 000D45B0  41 82 00 1C */	beq lbl_800D96CC
/* 800D96B4 000D45B4  3C 60 A5 FF */	lis r3, 0xA5FF005A@ha
/* 800D96B8 000D45B8  93 CD 9A C4 */	stw r30, Chan-_SDA_BASE_(r13)
/* 800D96BC 000D45BC  38 03 00 5A */	addi r0, r3, 0xA5FF005A@l
/* 800D96C0 000D45C0  93 ED 9A C0 */	stw r31, Dev-_SDA_BASE_(r13)
/* 800D96C4 000D45C4  90 0D 9A BC */	stw r0, BarnacleEnabled-_SDA_BASE_(r13)
/* 800D96C8 000D45C8  90 0D 9A B8 */	stw r0, Enabled-_SDA_BASE_(r13)
lbl_800D96CC:
/* 800D96CC 000D45CC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800D96D0 000D45D0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800D96D4 000D45D4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800D96D8 000D45D8  7C 08 03 A6 */	mtlr r0
/* 800D96DC 000D45DC  38 21 00 20 */	addi r1, r1, 0x20
/* 800D96E0 000D45E0  4E 80 00 20 */	blr 
