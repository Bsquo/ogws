.include "macros.inc"

.section .sdata2, "a"
.balign 0x8
.global __EXIFreq
__EXIFreq:
	.long 0x00000004

.section .text, "ax"
.global EXIWriteReg
EXIWriteReg:
/* 800D96E4 000D45E4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800D96E8 000D45E8  7C 08 02 A6 */	mflr r0
/* 800D96EC 000D45EC  2C 07 00 02 */	cmpwi r7, 2
/* 800D96F0 000D45F0  90 01 00 24 */	stw r0, 0x24(r1)
/* 800D96F4 000D45F4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800D96F8 000D45F8  7C 7F 1B 78 */	mr r31, r3
/* 800D96FC 000D45FC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800D9700 000D4600  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800D9704 000D4604  7C 9D 23 78 */	mr r29, r4
/* 800D9708 000D4608  90 A1 00 08 */	stw r5, 8(r1)
/* 800D970C 000D460C  41 82 00 24 */	beq lbl_800D9730
/* 800D9710 000D4610  40 80 00 34 */	bge lbl_800D9744
/* 800D9714 000D4614  2C 07 00 01 */	cmpwi r7, 1
/* 800D9718 000D4618  40 80 00 08 */	bge lbl_800D9720
/* 800D971C 000D461C  48 00 00 28 */	b lbl_800D9744
lbl_800D9720:
/* 800D9720 000D4620  88 06 00 00 */	lbz r0, 0(r6)
/* 800D9724 000D4624  54 00 C0 0E */	slwi r0, r0, 0x18
/* 800D9728 000D4628  90 01 00 0C */	stw r0, 0xc(r1)
/* 800D972C 000D462C  48 00 00 34 */	b lbl_800D9760
lbl_800D9730:
/* 800D9730 000D4630  A0 66 00 00 */	lhz r3, 0(r6)
/* 800D9734 000D4634  54 60 42 1E */	rlwinm r0, r3, 8, 8, 0xf
/* 800D9738 000D4638  50 60 C0 0E */	rlwimi r0, r3, 0x18, 0, 7
/* 800D973C 000D463C  90 01 00 0C */	stw r0, 0xc(r1)
/* 800D9740 000D4640  48 00 00 20 */	b lbl_800D9760
lbl_800D9744:
/* 800D9744 000D4644  80 86 00 00 */	lwz r4, 0(r6)
/* 800D9748 000D4648  54 83 42 1E */	rlwinm r3, r4, 8, 8, 0xf
/* 800D974C 000D464C  54 80 C4 2E */	rlwinm r0, r4, 0x18, 0x10, 0x17
/* 800D9750 000D4650  50 83 C0 0E */	rlwimi r3, r4, 0x18, 0, 7
/* 800D9754 000D4654  50 80 46 3E */	rlwimi r0, r4, 8, 0x18, 0x1f
/* 800D9758 000D4658  7C 60 03 78 */	or r0, r3, r0
/* 800D975C 000D465C  90 01 00 0C */	stw r0, 0xc(r1)
lbl_800D9760:
/* 800D9760 000D4660  7F E3 FB 78 */	mr r3, r31
/* 800D9764 000D4664  7F A4 EB 78 */	mr r4, r29
/* 800D9768 000D4668  38 A0 00 00 */	li r5, 0
/* 800D976C 000D466C  4B FF F6 9D */	bl EXILock
/* 800D9770 000D4670  7C 60 00 34 */	cntlzw r0, r3
/* 800D9774 000D4674  54 1E D9 7F */	rlwinm. r30, r0, 0x1b, 5, 0x1f
/* 800D9778 000D4678  41 82 00 0C */	beq lbl_800D9784
/* 800D977C 000D467C  38 60 00 00 */	li r3, 0
/* 800D9780 000D4680  48 00 00 D4 */	b lbl_800D9854
lbl_800D9784:
/* 800D9784 000D4684  7F E3 FB 78 */	mr r3, r31
/* 800D9788 000D4688  7F A4 EB 78 */	mr r4, r29
/* 800D978C 000D468C  38 A0 00 04 */	li r5, 4
/* 800D9790 000D4690  4B FF EE E5 */	bl EXISelect
/* 800D9794 000D4694  7C 60 00 34 */	cntlzw r0, r3
/* 800D9798 000D4698  54 00 D9 7E */	srwi r0, r0, 5
/* 800D979C 000D469C  7F DE 03 79 */	or. r30, r30, r0
/* 800D97A0 000D46A0  41 82 00 14 */	beq lbl_800D97B4
/* 800D97A4 000D46A4  7F E3 FB 78 */	mr r3, r31
/* 800D97A8 000D46A8  4B FF F7 5D */	bl EXIUnlock
/* 800D97AC 000D46AC  38 60 00 00 */	li r3, 0
/* 800D97B0 000D46B0  48 00 00 A4 */	b lbl_800D9854
lbl_800D97B4:
/* 800D97B4 000D46B4  7F E3 FB 78 */	mr r3, r31
/* 800D97B8 000D46B8  38 81 00 08 */	addi r4, r1, 8
/* 800D97BC 000D46BC  38 A0 00 04 */	li r5, 4
/* 800D97C0 000D46C0  38 C0 00 01 */	li r6, 1
/* 800D97C4 000D46C4  38 E0 00 00 */	li r7, 0
/* 800D97C8 000D46C8  4B FF E4 45 */	bl EXIImm
/* 800D97CC 000D46CC  7C 60 00 34 */	cntlzw r0, r3
/* 800D97D0 000D46D0  7F E3 FB 78 */	mr r3, r31
/* 800D97D4 000D46D4  54 00 D9 7E */	srwi r0, r0, 5
/* 800D97D8 000D46D8  7F DE 03 78 */	or r30, r30, r0
/* 800D97DC 000D46DC  4B FF E8 49 */	bl EXISync
/* 800D97E0 000D46E0  7C 60 00 34 */	cntlzw r0, r3
/* 800D97E4 000D46E4  7F E3 FB 78 */	mr r3, r31
/* 800D97E8 000D46E8  54 00 D9 7E */	srwi r0, r0, 5
/* 800D97EC 000D46EC  38 81 00 0C */	addi r4, r1, 0xc
/* 800D97F0 000D46F0  7F DE 03 78 */	or r30, r30, r0
/* 800D97F4 000D46F4  38 A0 00 04 */	li r5, 4
/* 800D97F8 000D46F8  38 C0 00 01 */	li r6, 1
/* 800D97FC 000D46FC  38 E0 00 00 */	li r7, 0
/* 800D9800 000D4700  4B FF E4 0D */	bl EXIImm
/* 800D9804 000D4704  7C 60 00 34 */	cntlzw r0, r3
/* 800D9808 000D4708  7F E3 FB 78 */	mr r3, r31
/* 800D980C 000D470C  54 00 D9 7E */	srwi r0, r0, 5
/* 800D9810 000D4710  7F DE 03 78 */	or r30, r30, r0
/* 800D9814 000D4714  4B FF E8 11 */	bl EXISync
/* 800D9818 000D4718  7C 60 00 34 */	cntlzw r0, r3
/* 800D981C 000D471C  7F E3 FB 78 */	mr r3, r31
/* 800D9820 000D4720  54 00 D9 7E */	srwi r0, r0, 5
/* 800D9824 000D4724  7F DE 03 78 */	or r30, r30, r0
/* 800D9828 000D4728  4B FF EF 7D */	bl EXIDeselect
/* 800D982C 000D472C  7C 60 00 34 */	cntlzw r0, r3
/* 800D9830 000D4730  7F E3 FB 78 */	mr r3, r31
/* 800D9834 000D4734  54 00 D9 7E */	srwi r0, r0, 5
/* 800D9838 000D4738  7F DE 03 78 */	or r30, r30, r0
/* 800D983C 000D473C  4B FF F6 C9 */	bl EXIUnlock
/* 800D9840 000D4740  7C 60 00 34 */	cntlzw r0, r3
/* 800D9844 000D4744  54 00 D9 7E */	srwi r0, r0, 5
/* 800D9848 000D4748  7F DE 03 78 */	or r30, r30, r0
/* 800D984C 000D474C  7F C0 00 34 */	cntlzw r0, r30
/* 800D9850 000D4750  54 03 D9 7E */	srwi r3, r0, 5
lbl_800D9854:
/* 800D9854 000D4754  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800D9858 000D4758  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800D985C 000D475C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800D9860 000D4760  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800D9864 000D4764  7C 08 03 A6 */	mtlr r0
/* 800D9868 000D4768  38 21 00 20 */	addi r1, r1, 0x20
/* 800D986C 000D476C  4E 80 00 20 */	blr 
