.include "macros.inc"

.section .sdata, "wa"
.balign 0x8
PlayRecordState:
	.long 0x00000009

.section .sbss, "wa"
.balign 0x8
PlayRecordGet:
	.skip 0x4
PlayRecordError:
	.skip 0x4
PlayRecordTerminate:
	.skip 0x4
PlayRecordTerminated:
	.skip 0x4
PlayRecordRetry:
	.skip 0x4
PlayRecordLastError:
	.skip 0x4
PlayRecordLastCloseTime:
	.skip 0x8

.section .data, "wa"
.balign 0x8
.global lbl_803A91D8
lbl_803A91D8:
	.string "/title/00000001/00000002/data/play_rec.dat"
    .balign 4
.global switch_803A9204
switch_803A9204:
	.incbin "baserom.dol", 0x3A5304, 0x1C

.section .bss, "wa"
.balign 0x8
PlayRecord:
    .balign 32
	.skip 0x80
PlayRecordAlarm:
    .skip 0x30
FileInfo:
    .skip 0x90 # Real size = 0x8C
Block:
    .skip 0xBC # Real size = 0xB8

.section .text, "ax"
PlayRecordAlarmCallback:
/* 800F65A8 000F14A8  38 60 00 00 */	li r3, 0
/* 800F65AC 000F14AC  38 80 00 00 */	li r4, 0
/* 800F65B0 000F14B0  48 00 00 04 */	b PlayRecordCallback

PlayRecordCallback:
/* 800F65B4 000F14B4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800F65B8 000F14B8  7C 08 02 A6 */	mflr r0
/* 800F65BC 000F14BC  90 01 00 24 */	stw r0, 0x24(r1)
/* 800F65C0 000F14C0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800F65C4 000F14C4  3F E0 80 42 */	lis r31, PlayRecord@ha
/* 800F65C8 000F14C8  3B FF 0C C0 */	addi r31, r31, PlayRecord@l
/* 800F65CC 000F14CC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800F65D0 000F14D0  3B C0 00 00 */	li r30, 0
/* 800F65D4 000F14D4  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800F65D8 000F14D8  80 0D 9C 70 */	lwz r0, PlayRecordTerminate-_SDA_BASE_(r13)
/* 800F65DC 000F14DC  90 6D 9C 7C */	stw r3, PlayRecordLastError-_SDA_BASE_(r13)
/* 800F65E0 000F14E0  2C 00 00 00 */	cmpwi r0, 0
/* 800F65E4 000F14E4  41 82 00 10 */	beq lbl_800F65F4
/* 800F65E8 000F14E8  38 00 00 01 */	li r0, 1
/* 800F65EC 000F14EC  90 0D 9C 74 */	stw r0, PlayRecordTerminated-_SDA_BASE_(r13)
/* 800F65F0 000F14F0  48 00 04 58 */	b lbl_800F6A48
lbl_800F65F4:
/* 800F65F4 000F14F4  80 0D 9C 78 */	lwz r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F65F8 000F14F8  2C 00 00 00 */	cmpwi r0, 0
/* 800F65FC 000F14FC  40 82 02 18 */	bne lbl_800F6814
/* 800F6600 000F1500  80 0D 83 A0 */	lwz r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6604 000F1504  28 00 00 06 */	cmplwi r0, 6
/* 800F6608 000F1508  41 81 01 F8 */	bgt lbl_800F6800
/* 800F660C 000F150C  3C 80 80 3B */	lis r4, switch_803A9204@ha
/* 800F6610 000F1510  54 00 10 3A */	slwi r0, r0, 2
/* 800F6614 000F1514  38 84 92 04 */	addi r4, r4, switch_803A9204@l
/* 800F6618 000F1518  7C 84 00 2E */	lwzx r4, r4, r0
/* 800F661C 000F151C  7C 89 03 A6 */	mtctr r4
/* 800F6620 000F1520  4E 80 04 20 */	bctr 
/* 800F6624 000F1524  38 00 00 01 */	li r0, 1
/* 800F6628 000F1528  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F662C 000F152C  48 00 01 E8 */	b lbl_800F6814
/* 800F6630 000F1530  2C 03 FF F6 */	cmpwi r3, -10
/* 800F6634 000F1534  40 82 00 38 */	bne lbl_800F666C
/* 800F6638 000F1538  38 00 00 01 */	li r0, 1
/* 800F663C 000F153C  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6640 000F1540  90 0D 9C 78 */	stw r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6644 000F1544  4B FF 6A D1 */	bl OSCreateAlarm
/* 800F6648 000F1548  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 800F664C 000F154C  3C E0 80 0F */	lis r7, PlayRecordAlarmCallback@ha
/* 800F6650 000F1550  80 03 00 F8 */	lwz r0, 0x800000F8@l(r3)
/* 800F6654 000F1554  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6658 000F1558  38 E7 65 A8 */	addi r7, r7, PlayRecordAlarmCallback@l
/* 800F665C 000F155C  38 A0 00 00 */	li r5, 0
/* 800F6660 000F1560  54 06 F0 BE */	srwi r6, r0, 2
/* 800F6664 000F1564  4B FF 6D 11 */	bl OSSetAlarm
/* 800F6668 000F1568  48 00 03 E0 */	b lbl_800F6A48
lbl_800F666C:
/* 800F666C 000F156C  2C 03 00 00 */	cmpwi r3, 0
/* 800F6670 000F1570  40 82 00 28 */	bne lbl_800F6698
/* 800F6674 000F1574  80 0D 9C 68 */	lwz r0, PlayRecordGet-_SDA_BASE_(r13)
/* 800F6678 000F1578  2C 00 00 00 */	cmpwi r0, 0
/* 800F667C 000F157C  40 82 00 10 */	bne lbl_800F668C
/* 800F6680 000F1580  38 00 00 02 */	li r0, 2
/* 800F6684 000F1584  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6688 000F1588  48 00 01 8C */	b lbl_800F6814
lbl_800F668C:
/* 800F668C 000F158C  38 00 00 04 */	li r0, 4
/* 800F6690 000F1590  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6694 000F1594  48 00 01 80 */	b lbl_800F6814
lbl_800F6698:
/* 800F6698 000F1598  38 60 00 01 */	li r3, 1
/* 800F669C 000F159C  38 00 00 07 */	li r0, 7
/* 800F66A0 000F15A0  90 6D 9C 6C */	stw r3, PlayRecordError-_SDA_BASE_(r13)
/* 800F66A4 000F15A4  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F66A8 000F15A8  48 00 03 A0 */	b lbl_800F6A48
/* 800F66AC 000F15AC  28 03 00 80 */	cmplwi r3, 0x80
/* 800F66B0 000F15B0  40 82 00 2C */	bne lbl_800F66DC
/* 800F66B4 000F15B4  38 9F 00 00 */	addi r4, r31, 0
/* 800F66B8 000F15B8  38 A0 00 01 */	li r5, 1
/* 800F66BC 000F15BC  80 64 00 60 */	lwz r3, 0x60(r4)
/* 800F66C0 000F15C0  38 00 00 03 */	li r0, 3
/* 800F66C4 000F15C4  80 84 00 64 */	lwz r4, 0x64(r4)
/* 800F66C8 000F15C8  90 AD 9C 68 */	stw r5, PlayRecordGet-_SDA_BASE_(r13)
/* 800F66CC 000F15CC  90 8D 9C 84 */	stw r4, (PlayRecordLastCloseTime + 0x4)-_SDA_BASE_(r13)
/* 800F66D0 000F15D0  90 6D 9C 80 */	stw r3, PlayRecordLastCloseTime-_SDA_BASE_(r13)
/* 800F66D4 000F15D4  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F66D8 000F15D8  48 00 01 3C */	b lbl_800F6814
lbl_800F66DC:
/* 800F66DC 000F15DC  38 60 00 01 */	li r3, 1
/* 800F66E0 000F15E0  38 00 00 06 */	li r0, 6
/* 800F66E4 000F15E4  90 6D 9C 6C */	stw r3, PlayRecordError-_SDA_BASE_(r13)
/* 800F66E8 000F15E8  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F66EC 000F15EC  48 00 01 28 */	b lbl_800F6814
/* 800F66F0 000F15F0  2C 03 00 00 */	cmpwi r3, 0
/* 800F66F4 000F15F4  40 82 00 10 */	bne lbl_800F6704
/* 800F66F8 000F15F8  38 00 00 04 */	li r0, 4
/* 800F66FC 000F15FC  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6700 000F1600  48 00 01 14 */	b lbl_800F6814
lbl_800F6704:
/* 800F6704 000F1604  38 60 00 01 */	li r3, 1
/* 800F6708 000F1608  38 00 00 06 */	li r0, 6
/* 800F670C 000F160C  90 6D 9C 6C */	stw r3, PlayRecordError-_SDA_BASE_(r13)
/* 800F6710 000F1610  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6714 000F1614  48 00 01 00 */	b lbl_800F6814
/* 800F6718 000F1618  38 00 00 05 */	li r0, 5
/* 800F671C 000F161C  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6720 000F1620  48 00 00 F4 */	b lbl_800F6814
/* 800F6724 000F1624  28 03 00 80 */	cmplwi r3, 0x80
/* 800F6728 000F1628  40 82 00 70 */	bne lbl_800F6798
/* 800F672C 000F162C  4B FF EE D9 */	bl OSGetTime
/* 800F6730 000F1630  3C A0 80 00 */	lis r5, 0x800000F8@ha
/* 800F6734 000F1634  81 0D 9C 84 */	lwz r8, (PlayRecordLastCloseTime + 0x4)-_SDA_BASE_(r13)
/* 800F6738 000F1638  80 05 00 F8 */	lwz r0, 0x800000F8@l(r5)
/* 800F673C 000F163C  38 A0 01 2C */	li r5, 0x12c
/* 800F6740 000F1640  81 2D 9C 80 */	lwz r9, PlayRecordLastCloseTime-_SDA_BASE_(r13)
/* 800F6744 000F1644  7D 08 20 10 */	subfc r8, r8, r4
/* 800F6748 000F1648  54 07 F0 BE */	srwi r7, r0, 2
/* 800F674C 000F164C  38 C0 00 00 */	li r6, 0
/* 800F6750 000F1650  7C 69 19 10 */	subfe r3, r9, r3
/* 800F6754 000F1654  6C 64 80 00 */	xoris r4, r3, 0x8000
/* 800F6758 000F1658  7C 07 28 16 */	mulhwu r0, r7, r5
/* 800F675C 000F165C  7C 66 29 D6 */	mullw r3, r6, r5
/* 800F6760 000F1660  7C 00 1A 14 */	add r0, r0, r3
/* 800F6764 000F1664  1C A7 01 2C */	mulli r5, r7, 0x12c
/* 800F6768 000F1668  6C 00 80 00 */	xoris r0, r0, 0x8000
/* 800F676C 000F166C  7C 68 28 10 */	subfc r3, r8, r5
/* 800F6770 000F1670  7C 84 01 10 */	subfe r4, r4, r0
/* 800F6774 000F1674  7C 80 01 10 */	subfe r4, r0, r0
/* 800F6778 000F1678  7C 84 00 D1 */	neg. r4, r4
/* 800F677C 000F167C  41 82 00 10 */	beq lbl_800F678C
/* 800F6780 000F1680  38 00 00 06 */	li r0, 6
/* 800F6784 000F1684  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6788 000F1688  48 00 00 8C */	b lbl_800F6814
lbl_800F678C:
/* 800F678C 000F168C  38 00 00 03 */	li r0, 3
/* 800F6790 000F1690  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6794 000F1694  48 00 00 80 */	b lbl_800F6814
lbl_800F6798:
/* 800F6798 000F1698  38 60 00 01 */	li r3, 1
/* 800F679C 000F169C  38 00 00 06 */	li r0, 6
/* 800F67A0 000F16A0  90 6D 9C 6C */	stw r3, PlayRecordError-_SDA_BASE_(r13)
/* 800F67A4 000F16A4  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F67A8 000F16A8  48 00 00 6C */	b lbl_800F6814
/* 800F67AC 000F16AC  80 0D 9C 6C */	lwz r0, PlayRecordError-_SDA_BASE_(r13)
/* 800F67B0 000F16B0  2C 00 00 00 */	cmpwi r0, 0
/* 800F67B4 000F16B4  41 82 00 10 */	beq lbl_800F67C4
/* 800F67B8 000F16B8  38 00 00 07 */	li r0, 7
/* 800F67BC 000F16BC  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F67C0 000F16C0  48 00 02 88 */	b lbl_800F6A48
lbl_800F67C4:
/* 800F67C4 000F16C4  2C 03 00 00 */	cmpwi r3, 0
/* 800F67C8 000F16C8  40 82 00 24 */	bne lbl_800F67EC
/* 800F67CC 000F16CC  38 9F 00 00 */	addi r4, r31, 0
/* 800F67D0 000F16D0  38 00 00 01 */	li r0, 1
/* 800F67D4 000F16D4  80 64 00 60 */	lwz r3, 0x60(r4)
/* 800F67D8 000F16D8  80 84 00 64 */	lwz r4, 0x64(r4)
/* 800F67DC 000F16DC  90 6D 9C 80 */	stw r3, PlayRecordLastCloseTime-_SDA_BASE_(r13)
/* 800F67E0 000F16E0  90 8D 9C 84 */	stw r4, (PlayRecordLastCloseTime + 0x4)-_SDA_BASE_(r13)
/* 800F67E4 000F16E4  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F67E8 000F16E8  48 00 00 2C */	b lbl_800F6814
lbl_800F67EC:
/* 800F67EC 000F16EC  38 60 00 07 */	li r3, 7
/* 800F67F0 000F16F0  38 00 00 01 */	li r0, 1
/* 800F67F4 000F16F4  90 6D 83 A0 */	stw r3, PlayRecordState-_SDA_BASE_(r13)
/* 800F67F8 000F16F8  90 0D 9C 6C */	stw r0, PlayRecordError-_SDA_BASE_(r13)
/* 800F67FC 000F16FC  48 00 02 4C */	b lbl_800F6A48
lbl_800F6800:
/* 800F6800 000F1700  38 60 00 07 */	li r3, 7
/* 800F6804 000F1704  38 00 00 01 */	li r0, 1
/* 800F6808 000F1708  90 6D 83 A0 */	stw r3, PlayRecordState-_SDA_BASE_(r13)
/* 800F680C 000F170C  90 0D 9C 6C */	stw r0, PlayRecordError-_SDA_BASE_(r13)
/* 800F6810 000F1710  48 00 02 38 */	b lbl_800F6A48
lbl_800F6814:
/* 800F6814 000F1714  80 0D 83 A0 */	lwz r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6818 000F1718  3B A0 00 00 */	li r29, 0
/* 800F681C 000F171C  93 AD 9C 78 */	stw r29, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6820 000F1720  2C 00 00 04 */	cmpwi r0, 4
/* 800F6824 000F1724  41 82 00 A0 */	beq lbl_800F68C4
/* 800F6828 000F1728  40 80 00 1C */	bge lbl_800F6844
/* 800F682C 000F172C  2C 00 00 02 */	cmpwi r0, 2
/* 800F6830 000F1730  41 82 00 4C */	beq lbl_800F687C
/* 800F6834 000F1734  40 80 00 6C */	bge lbl_800F68A0
/* 800F6838 000F1738  2C 00 00 01 */	cmpwi r0, 1
/* 800F683C 000F173C  40 80 00 18 */	bge lbl_800F6854
/* 800F6840 000F1740  48 00 01 30 */	b lbl_800F6970
lbl_800F6844:
/* 800F6844 000F1744  2C 00 00 06 */	cmpwi r0, 6
/* 800F6848 000F1748  41 82 01 10 */	beq lbl_800F6958
/* 800F684C 000F174C  40 80 01 24 */	bge lbl_800F6970
/* 800F6850 000F1750  48 00 00 B0 */	b lbl_800F6900
lbl_800F6854:
/* 800F6854 000F1754  3C 60 80 3B */	lis r3, lbl_803A91D8@ha
/* 800F6858 000F1758  3C C0 80 0F */	lis r6, PlayRecordCallback@ha
/* 800F685C 000F175C  38 63 91 D8 */	addi r3, r3, lbl_803A91D8@l
/* 800F6860 000F1760  38 9F 00 B0 */	addi r4, r31, 0xb0
/* 800F6864 000F1764  38 C6 65 B4 */	addi r6, r6, PlayRecordCallback@l
/* 800F6868 000F1768  38 FF 01 40 */	addi r7, r31, 0x140
/* 800F686C 000F176C  38 A0 00 03 */	li r5, 3
/* 800F6870 000F1770  4B FF 35 BD */	bl NANDOpenAsync
/* 800F6874 000F1774  7C 7E 1B 78 */	mr r30, r3
/* 800F6878 000F1778  48 00 00 F8 */	b lbl_800F6970
lbl_800F687C:
/* 800F687C 000F177C  3C C0 80 0F */	lis r6, PlayRecordCallback@ha
/* 800F6880 000F1780  38 7F 00 B0 */	addi r3, r31, 0xb0
/* 800F6884 000F1784  38 9F 00 00 */	addi r4, r31, 0
/* 800F6888 000F1788  38 FF 01 40 */	addi r7, r31, 0x140
/* 800F688C 000F178C  38 C6 65 B4 */	addi r6, r6, PlayRecordCallback@l
/* 800F6890 000F1790  38 A0 00 80 */	li r5, 0x80
/* 800F6894 000F1794  4B FF 27 75 */	bl NANDReadAsync
/* 800F6898 000F1798  7C 7E 1B 78 */	mr r30, r3
/* 800F689C 000F179C  48 00 00 D4 */	b lbl_800F6970
lbl_800F68A0:
/* 800F68A0 000F17A0  3C C0 80 0F */	lis r6, PlayRecordCallback@ha
/* 800F68A4 000F17A4  38 7F 00 B0 */	addi r3, r31, 0xb0
/* 800F68A8 000F17A8  38 C6 65 B4 */	addi r6, r6, PlayRecordCallback@l
/* 800F68AC 000F17AC  38 FF 01 40 */	addi r7, r31, 0x140
/* 800F68B0 000F17B0  38 80 00 00 */	li r4, 0
/* 800F68B4 000F17B4  38 A0 00 00 */	li r5, 0
/* 800F68B8 000F17B8  4B FF 29 49 */	bl NANDSeekAsync
/* 800F68BC 000F17BC  7C 7E 1B 78 */	mr r30, r3
/* 800F68C0 000F17C0  48 00 00 B0 */	b lbl_800F6970
lbl_800F68C4:
/* 800F68C4 000F17C4  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F68C8 000F17C8  4B FF 68 4D */	bl OSCreateAlarm
/* 800F68CC 000F17CC  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 800F68D0 000F17D0  38 00 00 3C */	li r0, 0x3c
/* 800F68D4 000F17D4  80 63 00 F8 */	lwz r3, 0x800000F8@l(r3)
/* 800F68D8 000F17D8  3C E0 80 0F */	lis r7, PlayRecordAlarmCallback@ha
/* 800F68DC 000F17DC  7C 9D 01 D6 */	mullw r4, r29, r0
/* 800F68E0 000F17E0  54 65 F0 BE */	srwi r5, r3, 2
/* 800F68E4 000F17E4  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F68E8 000F17E8  38 E7 65 A8 */	addi r7, r7, PlayRecordAlarmCallback@l
/* 800F68EC 000F17EC  7C 05 00 16 */	mulhwu r0, r5, r0
/* 800F68F0 000F17F0  1C C5 00 3C */	mulli r6, r5, 0x3c
/* 800F68F4 000F17F4  7C A0 22 14 */	add r5, r0, r4
/* 800F68F8 000F17F8  4B FF 6A 7D */	bl OSSetAlarm
/* 800F68FC 000F17FC  48 00 00 74 */	b lbl_800F6970
lbl_800F6900:
/* 800F6900 000F1800  4B FF ED 05 */	bl OSGetTime
/* 800F6904 000F1804  38 BF 00 00 */	addi r5, r31, 0
/* 800F6908 000F1808  38 00 00 1F */	li r0, 0x1f
/* 800F690C 000F180C  90 85 00 64 */	stw r4, 0x64(r5)
/* 800F6910 000F1810  38 C5 00 04 */	addi r6, r5, 4
/* 800F6914 000F1814  38 80 00 00 */	li r4, 0
/* 800F6918 000F1818  90 65 00 60 */	stw r3, 0x60(r5)
/* 800F691C 000F181C  7C 09 03 A6 */	mtctr r0
lbl_800F6920:
/* 800F6920 000F1820  80 06 00 00 */	lwz r0, 0(r6)
/* 800F6924 000F1824  38 C6 00 04 */	addi r6, r6, 4
/* 800F6928 000F1828  7C 84 02 14 */	add r4, r4, r0
/* 800F692C 000F182C  42 00 FF F4 */	bdnz lbl_800F6920
/* 800F6930 000F1830  3C C0 80 0F */	lis r6, PlayRecordCallback@ha
/* 800F6934 000F1834  90 9F 00 00 */	stw r4, 0(r31)
/* 800F6938 000F1838  38 7F 00 B0 */	addi r3, r31, 0xb0
/* 800F693C 000F183C  38 9F 00 00 */	addi r4, r31, 0
/* 800F6940 000F1840  38 C6 65 B4 */	addi r6, r6, PlayRecordCallback@l
/* 800F6944 000F1844  38 FF 01 40 */	addi r7, r31, 0x140
/* 800F6948 000F1848  38 A0 00 80 */	li r5, 0x80
/* 800F694C 000F184C  4B FF 27 9D */	bl NANDWriteAsync
/* 800F6950 000F1850  7C 7E 1B 78 */	mr r30, r3
/* 800F6954 000F1854  48 00 00 1C */	b lbl_800F6970
lbl_800F6958:
/* 800F6958 000F1858  3C 80 80 0F */	lis r4, PlayRecordCallback@ha
/* 800F695C 000F185C  38 7F 00 B0 */	addi r3, r31, 0xb0
/* 800F6960 000F1860  38 84 65 B4 */	addi r4, r4, PlayRecordCallback@l
/* 800F6964 000F1864  38 BF 01 40 */	addi r5, r31, 0x140
/* 800F6968 000F1868  4B FF 36 99 */	bl NANDCloseAsync
/* 800F696C 000F186C  7C 7E 1B 78 */	mr r30, r3
lbl_800F6970:
/* 800F6970 000F1870  2C 1E 00 00 */	cmpwi r30, 0
/* 800F6974 000F1874  41 82 00 D0 */	beq lbl_800F6A44
/* 800F6978 000F1878  2C 1E FF FD */	cmpwi r30, -3
/* 800F697C 000F187C  40 82 00 38 */	bne lbl_800F69B4
/* 800F6980 000F1880  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6984 000F1884  4B FF 67 91 */	bl OSCreateAlarm
/* 800F6988 000F1888  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 800F698C 000F188C  3C E0 80 0F */	lis r7, PlayRecordAlarmCallback@ha
/* 800F6990 000F1890  80 03 00 F8 */	lwz r0, 0x800000F8@l(r3)
/* 800F6994 000F1894  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6998 000F1898  38 E7 65 A8 */	addi r7, r7, PlayRecordAlarmCallback@l
/* 800F699C 000F189C  38 A0 00 00 */	li r5, 0
/* 800F69A0 000F18A0  54 06 F0 BE */	srwi r6, r0, 2
/* 800F69A4 000F18A4  4B FF 69 D1 */	bl OSSetAlarm
/* 800F69A8 000F18A8  38 00 00 01 */	li r0, 1
/* 800F69AC 000F18AC  90 0D 9C 78 */	stw r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F69B0 000F18B0  48 00 00 94 */	b lbl_800F6A44
lbl_800F69B4:
/* 800F69B4 000F18B4  80 0D 83 A0 */	lwz r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F69B8 000F18B8  38 60 00 01 */	li r3, 1
/* 800F69BC 000F18BC  90 6D 9C 6C */	stw r3, PlayRecordError-_SDA_BASE_(r13)
/* 800F69C0 000F18C0  2C 00 00 04 */	cmpwi r0, 4
/* 800F69C4 000F18C4  41 82 00 78 */	beq lbl_800F6A3C
/* 800F69C8 000F18C8  40 80 00 10 */	bge lbl_800F69D8
/* 800F69CC 000F18CC  2C 00 00 02 */	cmpwi r0, 2
/* 800F69D0 000F18D0  40 80 00 10 */	bge lbl_800F69E0
/* 800F69D4 000F18D4  48 00 00 68 */	b lbl_800F6A3C
lbl_800F69D8:
/* 800F69D8 000F18D8  2C 00 00 06 */	cmpwi r0, 6
/* 800F69DC 000F18DC  40 80 00 60 */	bge lbl_800F6A3C
lbl_800F69E0:
/* 800F69E0 000F18E0  38 00 00 06 */	li r0, 6
/* 800F69E4 000F18E4  3C 80 80 0F */	lis r4, PlayRecordCallback@ha
/* 800F69E8 000F18E8  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F69EC 000F18EC  38 7F 00 B0 */	addi r3, r31, 0xb0
/* 800F69F0 000F18F0  38 84 65 B4 */	addi r4, r4, PlayRecordCallback@l
/* 800F69F4 000F18F4  38 BF 01 40 */	addi r5, r31, 0x140
/* 800F69F8 000F18F8  4B FF 36 09 */	bl NANDCloseAsync
/* 800F69FC 000F18FC  2C 03 FF FD */	cmpwi r3, -3
/* 800F6A00 000F1900  7C 7E 1B 78 */	mr r30, r3
/* 800F6A04 000F1904  40 82 00 40 */	bne lbl_800F6A44
/* 800F6A08 000F1908  38 00 00 01 */	li r0, 1
/* 800F6A0C 000F190C  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6A10 000F1910  90 0D 9C 78 */	stw r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6A14 000F1914  4B FF 67 01 */	bl OSCreateAlarm
/* 800F6A18 000F1918  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 800F6A1C 000F191C  3C E0 80 0F */	lis r7, PlayRecordAlarmCallback@ha
/* 800F6A20 000F1920  80 03 00 F8 */	lwz r0, 0x800000F8@l(r3)
/* 800F6A24 000F1924  38 7F 00 80 */	addi r3, r31, 0x80
/* 800F6A28 000F1928  38 E7 65 A8 */	addi r7, r7, PlayRecordAlarmCallback@l
/* 800F6A2C 000F192C  38 A0 00 00 */	li r5, 0
/* 800F6A30 000F1930  54 06 F0 BE */	srwi r6, r0, 2
/* 800F6A34 000F1934  4B FF 69 41 */	bl OSSetAlarm
/* 800F6A38 000F1938  48 00 00 0C */	b lbl_800F6A44
lbl_800F6A3C:
/* 800F6A3C 000F193C  38 00 00 07 */	li r0, 7
/* 800F6A40 000F1940  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
lbl_800F6A44:
/* 800F6A44 000F1944  93 CD 9C 7C */	stw r30, PlayRecordLastError-_SDA_BASE_(r13)
lbl_800F6A48:
/* 800F6A48 000F1948  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800F6A4C 000F194C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800F6A50 000F1950  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800F6A54 000F1954  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800F6A58 000F1958  7C 08 03 A6 */	mtlr r0
/* 800F6A5C 000F195C  38 21 00 20 */	addi r1, r1, 0x20
/* 800F6A60 000F1960  4E 80 00 20 */	blr 

.global __OSStartPlayRecord
__OSStartPlayRecord:
/* 800F6A64 000F1964  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800F6A68 000F1968  7C 08 02 A6 */	mflr r0
/* 800F6A6C 000F196C  90 01 00 14 */	stw r0, 0x14(r1)
/* 800F6A70 000F1970  4B FF 44 E1 */	bl NANDInit
/* 800F6A74 000F1974  2C 03 00 00 */	cmpwi r3, 0
/* 800F6A78 000F1978  40 82 00 30 */	bne lbl_800F6AA8
/* 800F6A7C 000F197C  38 00 00 00 */	li r0, 0
/* 800F6A80 000F1980  38 60 00 00 */	li r3, 0
/* 800F6A84 000F1984  90 0D 9C 70 */	stw r0, PlayRecordTerminate-_SDA_BASE_(r13)
/* 800F6A88 000F1988  38 80 00 00 */	li r4, 0
/* 800F6A8C 000F198C  90 0D 9C 68 */	stw r0, PlayRecordGet-_SDA_BASE_(r13)
/* 800F6A90 000F1990  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6A94 000F1994  90 0D 9C 6C */	stw r0, PlayRecordError-_SDA_BASE_(r13)
/* 800F6A98 000F1998  90 0D 9C 78 */	stw r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6A9C 000F199C  90 0D 9C 74 */	stw r0, PlayRecordTerminated-_SDA_BASE_(r13)
/* 800F6AA0 000F19A0  90 0D 9C 7C */	stw r0, PlayRecordLastError-_SDA_BASE_(r13)
/* 800F6AA4 000F19A4  4B FF FB 11 */	bl PlayRecordCallback
lbl_800F6AA8:
/* 800F6AA8 000F19A8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800F6AAC 000F19AC  7C 08 03 A6 */	mtlr r0
/* 800F6AB0 000F19B0  38 21 00 10 */	addi r1, r1, 0x10
/* 800F6AB4 000F19B4  4E 80 00 20 */	blr 

.global __OSStopPlayRecord
__OSStopPlayRecord:
/* 800F6AB8 000F19B8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800F6ABC 000F19BC  7C 08 02 A6 */	mflr r0
/* 800F6AC0 000F19C0  90 01 00 24 */	stw r0, 0x24(r1)
/* 800F6AC4 000F19C4  39 61 00 20 */	addi r11, r1, 0x20
/* 800F6AC8 000F19C8  4B FB B2 79 */	bl _savegpr_26
/* 800F6ACC 000F19CC  3F A0 80 42 */	lis r29, PlayRecord@ha
/* 800F6AD0 000F19D0  3B BD 0C C0 */	addi r29, r29, PlayRecord@l
/* 800F6AD4 000F19D4  4B FF AD ED */	bl OSDisableInterrupts
/* 800F6AD8 000F19D8  80 0D 83 A0 */	lwz r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6ADC 000F19DC  38 80 00 01 */	li r4, 1
/* 800F6AE0 000F19E0  90 8D 9C 70 */	stw r4, PlayRecordTerminate-_SDA_BASE_(r13)
/* 800F6AE4 000F19E4  7C 7A 1B 78 */	mr r26, r3
/* 800F6AE8 000F19E8  2C 00 00 07 */	cmpwi r0, 7
/* 800F6AEC 000F19EC  41 82 00 1C */	beq lbl_800F6B08
/* 800F6AF0 000F19F0  2C 00 00 00 */	cmpwi r0, 0
/* 800F6AF4 000F19F4  41 82 00 14 */	beq lbl_800F6B08
/* 800F6AF8 000F19F8  2C 00 00 09 */	cmpwi r0, 9
/* 800F6AFC 000F19FC  41 82 00 0C */	beq lbl_800F6B08
/* 800F6B00 000F1A00  2C 00 00 08 */	cmpwi r0, 8
/* 800F6B04 000F1A04  40 82 00 10 */	bne lbl_800F6B14
lbl_800F6B08:
/* 800F6B08 000F1A08  7F 43 D3 78 */	mr r3, r26
/* 800F6B0C 000F1A0C  4B FF AD DD */	bl OSRestoreInterrupts
/* 800F6B10 000F1A10  48 00 01 70 */	b lbl_800F6C80
lbl_800F6B14:
/* 800F6B14 000F1A14  2C 00 00 04 */	cmpwi r0, 4
/* 800F6B18 000F1A18  40 82 00 64 */	bne lbl_800F6B7C
/* 800F6B1C 000F1A1C  38 7D 00 80 */	addi r3, r29, 0x80
/* 800F6B20 000F1A20  4B FF 69 49 */	bl OSCancelAlarm
/* 800F6B24 000F1A24  7F 43 D3 78 */	mr r3, r26
/* 800F6B28 000F1A28  4B FF AD C1 */	bl OSRestoreInterrupts
/* 800F6B2C 000F1A2C  4B FF EA D9 */	bl OSGetTime
/* 800F6B30 000F1A30  38 BD 00 00 */	addi r5, r29, 0
/* 800F6B34 000F1A34  38 00 00 1F */	li r0, 0x1f
/* 800F6B38 000F1A38  90 85 00 64 */	stw r4, 0x64(r5)
/* 800F6B3C 000F1A3C  38 C5 00 04 */	addi r6, r5, 4
/* 800F6B40 000F1A40  38 80 00 00 */	li r4, 0
/* 800F6B44 000F1A44  90 65 00 60 */	stw r3, 0x60(r5)
/* 800F6B48 000F1A48  7C 09 03 A6 */	mtctr r0
lbl_800F6B4C:
/* 800F6B4C 000F1A4C  80 06 00 00 */	lwz r0, 0(r6)
/* 800F6B50 000F1A50  38 C6 00 04 */	addi r6, r6, 4
/* 800F6B54 000F1A54  7C 84 02 14 */	add r4, r4, r0
/* 800F6B58 000F1A58  42 00 FF F4 */	bdnz lbl_800F6B4C
/* 800F6B5C 000F1A5C  90 9D 00 00 */	stw r4, 0(r29)
/* 800F6B60 000F1A60  38 7D 00 B0 */	addi r3, r29, 0xb0
/* 800F6B64 000F1A64  38 9D 00 00 */	addi r4, r29, 0
/* 800F6B68 000F1A68  38 A0 00 80 */	li r5, 0x80
/* 800F6B6C 000F1A6C  4B FF 25 15 */	bl NANDWrite
/* 800F6B70 000F1A70  38 7D 00 B0 */	addi r3, r29, 0xb0
/* 800F6B74 000F1A74  4B FF 34 21 */	bl NANDClose
/* 800F6B78 000F1A78  48 00 01 08 */	b lbl_800F6C80
lbl_800F6B7C:
/* 800F6B7C 000F1A7C  80 0D 9C 78 */	lwz r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6B80 000F1A80  2C 00 00 00 */	cmpwi r0, 0
/* 800F6B84 000F1A84  41 82 00 18 */	beq lbl_800F6B9C
/* 800F6B88 000F1A88  38 7D 00 80 */	addi r3, r29, 0x80
/* 800F6B8C 000F1A8C  4B FF 68 DD */	bl OSCancelAlarm
/* 800F6B90 000F1A90  7F 43 D3 78 */	mr r3, r26
/* 800F6B94 000F1A94  4B FF AD 55 */	bl OSRestoreInterrupts
/* 800F6B98 000F1A98  48 00 00 78 */	b lbl_800F6C10
lbl_800F6B9C:
/* 800F6B9C 000F1A9C  4B FF AD 4D */	bl OSRestoreInterrupts
/* 800F6BA0 000F1AA0  4B FF EA 65 */	bl OSGetTime
/* 800F6BA4 000F1AA4  3C A0 10 62 */	lis r5, 0x10624DD3@ha
/* 800F6BA8 000F1AA8  38 00 00 00 */	li r0, 0
/* 800F6BAC 000F1AAC  7C 9E 23 78 */	mr r30, r4
/* 800F6BB0 000F1AB0  7C 7F 1B 78 */	mr r31, r3
/* 800F6BB4 000F1AB4  3B 45 4D D3 */	addi r26, r5, 0x10624DD3@l
/* 800F6BB8 000F1AB8  6C 1C 80 00 */	xoris r28, r0, 0x8000
/* 800F6BBC 000F1ABC  3F 60 80 00 */	lis r27, 0x8000
lbl_800F6BC0:
/* 800F6BC0 000F1AC0  80 0D 9C 74 */	lwz r0, PlayRecordTerminated-_SDA_BASE_(r13)
/* 800F6BC4 000F1AC4  2C 00 00 00 */	cmpwi r0, 0
/* 800F6BC8 000F1AC8  40 82 00 48 */	bne lbl_800F6C10
/* 800F6BCC 000F1ACC  4B FF EA 39 */	bl OSGetTime
/* 800F6BD0 000F1AD0  80 1B 00 F8 */	lwz r0, 0xf8(r27)
/* 800F6BD4 000F1AD4  7C 9E 20 10 */	subfc r4, r30, r4
/* 800F6BD8 000F1AD8  7C 7F 19 10 */	subfe r3, r31, r3
/* 800F6BDC 000F1ADC  54 00 F0 BE */	srwi r0, r0, 2
/* 800F6BE0 000F1AE0  7C 1A 00 16 */	mulhwu r0, r26, r0
/* 800F6BE4 000F1AE4  6C 63 80 00 */	xoris r3, r3, 0x8000
/* 800F6BE8 000F1AE8  54 00 D1 BE */	srwi r0, r0, 6
/* 800F6BEC 000F1AEC  1C 00 01 F4 */	mulli r0, r0, 0x1f4
/* 800F6BF0 000F1AF0  7C 04 00 10 */	subfc r0, r4, r0
/* 800F6BF4 000F1AF4  7C 63 E1 10 */	subfe r3, r3, r28
/* 800F6BF8 000F1AF8  7C 7C E1 10 */	subfe r3, r28, r28
/* 800F6BFC 000F1AFC  7C 63 00 D1 */	neg. r3, r3
/* 800F6C00 000F1B00  41 82 FF C0 */	beq lbl_800F6BC0
/* 800F6C04 000F1B04  38 00 00 08 */	li r0, 8
/* 800F6C08 000F1B08  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6C0C 000F1B0C  48 00 00 7C */	b lbl_800F6C88
lbl_800F6C10:
/* 800F6C10 000F1B10  80 0D 83 A0 */	lwz r0, PlayRecordState-_SDA_BASE_(r13)
/* 800F6C14 000F1B14  2C 00 00 04 */	cmpwi r0, 4
/* 800F6C18 000F1B18  41 82 00 68 */	beq lbl_800F6C80
/* 800F6C1C 000F1B1C  40 80 00 14 */	bge lbl_800F6C30
/* 800F6C20 000F1B20  2C 00 00 01 */	cmpwi r0, 1
/* 800F6C24 000F1B24  41 82 00 24 */	beq lbl_800F6C48
/* 800F6C28 000F1B28  40 80 00 14 */	bge lbl_800F6C3C
/* 800F6C2C 000F1B2C  48 00 00 54 */	b lbl_800F6C80
lbl_800F6C30:
/* 800F6C30 000F1B30  2C 00 00 06 */	cmpwi r0, 6
/* 800F6C34 000F1B34  41 82 00 38 */	beq lbl_800F6C6C
/* 800F6C38 000F1B38  40 80 00 48 */	bge lbl_800F6C80
lbl_800F6C3C:
/* 800F6C3C 000F1B3C  38 7D 00 B0 */	addi r3, r29, 0xb0
/* 800F6C40 000F1B40  4B FF 33 55 */	bl NANDClose
/* 800F6C44 000F1B44  48 00 00 3C */	b lbl_800F6C80
lbl_800F6C48:
/* 800F6C48 000F1B48  80 0D 9C 7C */	lwz r0, PlayRecordLastError-_SDA_BASE_(r13)
/* 800F6C4C 000F1B4C  2C 00 00 00 */	cmpwi r0, 0
/* 800F6C50 000F1B50  40 82 00 30 */	bne lbl_800F6C80
/* 800F6C54 000F1B54  80 0D 9C 78 */	lwz r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6C58 000F1B58  2C 00 00 00 */	cmpwi r0, 0
/* 800F6C5C 000F1B5C  40 82 00 24 */	bne lbl_800F6C80
/* 800F6C60 000F1B60  38 7D 00 B0 */	addi r3, r29, 0xb0
/* 800F6C64 000F1B64  4B FF 33 31 */	bl NANDClose
/* 800F6C68 000F1B68  48 00 00 18 */	b lbl_800F6C80
lbl_800F6C6C:
/* 800F6C6C 000F1B6C  80 0D 9C 78 */	lwz r0, PlayRecordRetry-_SDA_BASE_(r13)
/* 800F6C70 000F1B70  2C 00 00 00 */	cmpwi r0, 0
/* 800F6C74 000F1B74  41 82 00 0C */	beq lbl_800F6C80
/* 800F6C78 000F1B78  38 7D 00 B0 */	addi r3, r29, 0xb0
/* 800F6C7C 000F1B7C  4B FF 33 19 */	bl NANDClose
lbl_800F6C80:
/* 800F6C80 000F1B80  38 00 00 09 */	li r0, 9
/* 800F6C84 000F1B84  90 0D 83 A0 */	stw r0, PlayRecordState-_SDA_BASE_(r13)
lbl_800F6C88:
/* 800F6C88 000F1B88  39 61 00 20 */	addi r11, r1, 0x20
/* 800F6C8C 000F1B8C  4B FB B1 01 */	bl _restgpr_26
/* 800F6C90 000F1B90  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800F6C94 000F1B94  7C 08 03 A6 */	mtlr r0
/* 800F6C98 000F1B98  38 21 00 20 */	addi r1, r1, 0x20
/* 800F6C9C 000F1B9C  4E 80 00 20 */	blr 
