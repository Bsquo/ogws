.include "macros.inc"

.section .sdata2, "a"
.balign 0x8
.global lbl_804C1220
lbl_804C1220:
	.byte 0xFF
.global lbl_804C1221
lbl_804C1221:
	.byte 0xFF
.global lbl_804C1222
lbl_804C1222:
	.byte 0xFF
.global lbl_804C1223
lbl_804C1223:
	.byte 0x00

.section .sdata, "wa"
.balign 0x8
.global lbl_804BD6F8
lbl_804BD6F8:
	.string "/dev/es"

.section .sbss, "wa"
.balign 0x8
.global __OSInReboot
__OSInReboot:
	.skip 0x4

.section .bss, "wa"
.balign 0x8
views:
	.balign 64
	.skip 0xBD00

.section .text, "ax"
.global __OSGetExecParams
__OSGetExecParams:
/* 800EF64C 000EA54C  3C A0 80 00 */	lis r5, 0x800030F0@ha
/* 800EF650 000EA550  80 85 30 F0 */	lwz r4, 0x800030F0@l(r5)
/* 800EF654 000EA554  7C 04 28 40 */	cmplw r4, r5
/* 800EF658 000EA558  41 80 00 0C */	blt lbl_800EF664
/* 800EF65C 000EA55C  38 A0 00 1C */	li r5, 0x1c
/* 800EF660 000EA560  4B F1 49 A0 */	b memcpy
lbl_800EF664:
/* 800EF664 000EA564  38 00 00 00 */	li r0, 0
/* 800EF668 000EA568  90 03 00 00 */	stw r0, 0(r3)
/* 800EF66C 000EA56C  4E 80 00 20 */	blr 

.global __OSLaunchMenu
__OSLaunchMenu:
/* 800EF670 000EA570  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800EF674 000EA574  7C 08 02 A6 */	mflr r0
/* 800EF678 000EA578  38 60 00 01 */	li r3, 1
/* 800EF67C 000EA57C  39 00 FF FF */	li r8, -1
/* 800EF680 000EA580  90 01 00 24 */	stw r0, 0x24(r1)
/* 800EF684 000EA584  38 80 00 00 */	li r4, 0
/* 800EF688 000EA588  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800EF68C 000EA58C  3B E0 00 00 */	li r31, 0
/* 800EF690 000EA590  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800EF694 000EA594  3F C0 80 41 */	lis r30, views@ha
/* 800EF698 000EA598  3B DE 41 C0 */	addi r30, r30, views@l
/* 800EF69C 000EA59C  88 E2 98 00 */	lbz r7, lbl_804C1220-_SDA2_BASE_(r2)
/* 800EF6A0 000EA5A0  88 C2 98 01 */	lbz r6, lbl_804C1221-_SDA2_BASE_(r2)
/* 800EF6A4 000EA5A4  88 A2 98 02 */	lbz r5, lbl_804C1222-_SDA2_BASE_(r2)
/* 800EF6A8 000EA5A8  88 02 98 03 */	lbz r0, lbl_804C1223-_SDA2_BASE_(r2)
/* 800EF6AC 000EA5AC  90 61 00 10 */	stw r3, 0x10(r1)
/* 800EF6B0 000EA5B0  38 6D 83 78 */	addi r3, r13, lbl_804BD6F8-_SDA_BASE_
/* 800EF6B4 000EA5B4  91 01 00 0C */	stw r8, 0xc(r1)
/* 800EF6B8 000EA5B8  98 E1 00 08 */	stb r7, 8(r1)
/* 800EF6BC 000EA5BC  98 C1 00 09 */	stb r6, 9(r1)
/* 800EF6C0 000EA5C0  98 A1 00 0A */	stb r5, 0xa(r1)
/* 800EF6C4 000EA5C4  98 01 00 0B */	stb r0, 0xb(r1)
/* 800EF6C8 000EA5C8  4B FF 51 89 */	bl IOS_Open
/* 800EF6CC 000EA5CC  2C 03 00 00 */	cmpwi r3, 0
/* 800EF6D0 000EA5D0  90 61 00 0C */	stw r3, 0xc(r1)
/* 800EF6D4 000EA5D4  40 80 00 08 */	bge lbl_800EF6DC
/* 800EF6D8 000EA5D8  7C 7F 1B 78 */	mr r31, r3
lbl_800EF6DC:
/* 800EF6DC 000EA5DC  2C 1F 00 00 */	cmpwi r31, 0
/* 800EF6E0 000EA5E0  40 82 00 74 */	bne lbl_800EF754
/* 800EF6E4 000EA5E4  38 61 00 0C */	addi r3, r1, 0xc
/* 800EF6E8 000EA5E8  39 01 00 10 */	addi r8, r1, 0x10
/* 800EF6EC 000EA5EC  38 C0 00 02 */	li r6, 2
/* 800EF6F0 000EA5F0  38 A0 00 01 */	li r5, 1
/* 800EF6F4 000EA5F4  38 E0 00 00 */	li r7, 0
/* 800EF6F8 000EA5F8  48 00 00 75 */	bl _ES_GetTicketViews
/* 800EF6FC 000EA5FC  80 01 00 10 */	lwz r0, 0x10(r1)
/* 800EF700 000EA600  28 00 00 01 */	cmplwi r0, 1
/* 800EF704 000EA604  40 82 00 50 */	bne lbl_800EF754
/* 800EF708 000EA608  2C 03 00 00 */	cmpwi r3, 0
/* 800EF70C 000EA60C  41 82 00 08 */	beq lbl_800EF714
/* 800EF710 000EA610  48 00 00 44 */	b lbl_800EF754
lbl_800EF714:
/* 800EF714 000EA614  7F C7 F3 78 */	mr r7, r30
/* 800EF718 000EA618  38 61 00 0C */	addi r3, r1, 0xc
/* 800EF71C 000EA61C  39 01 00 10 */	addi r8, r1, 0x10
/* 800EF720 000EA620  38 C0 00 02 */	li r6, 2
/* 800EF724 000EA624  38 A0 00 01 */	li r5, 1
/* 800EF728 000EA628  48 00 00 45 */	bl _ES_GetTicketViews
/* 800EF72C 000EA62C  2C 03 00 00 */	cmpwi r3, 0
/* 800EF730 000EA630  40 82 00 24 */	bne lbl_800EF754
/* 800EF734 000EA634  7F C7 F3 78 */	mr r7, r30
/* 800EF738 000EA638  38 61 00 0C */	addi r3, r1, 0xc
/* 800EF73C 000EA63C  38 C0 00 02 */	li r6, 2
/* 800EF740 000EA640  38 A0 00 01 */	li r5, 1
/* 800EF744 000EA644  48 00 01 49 */	bl _ES_LaunchTitle
/* 800EF748 000EA648  2C 03 00 00 */	cmpwi r3, 0
/* 800EF74C 000EA64C  40 82 00 08 */	bne lbl_800EF754
lbl_800EF750:
/* 800EF750 000EA650  48 00 00 00 */	b lbl_800EF750
lbl_800EF754:
/* 800EF754 000EA654  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800EF758 000EA658  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800EF75C 000EA65C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800EF760 000EA660  7C 08 03 A6 */	mtlr r0
/* 800EF764 000EA664  38 21 00 20 */	addi r1, r1, 0x20
/* 800EF768 000EA668  4E 80 00 20 */	blr 

_ES_GetTicketViews:
/* 800EF76C 000EA66C  54 2B 06 FE */	clrlwi r11, r1, 0x1b
/* 800EF770 000EA670  7C 2C 0B 78 */	mr r12, r1
/* 800EF774 000EA674  21 6B FE A0 */	subfic r11, r11, -352
/* 800EF778 000EA678  7C 21 59 6E */	stwux r1, r1, r11
/* 800EF77C 000EA67C  7C 08 02 A6 */	mflr r0
/* 800EF780 000EA680  90 0C 00 04 */	stw r0, 4(r12)
/* 800EF784 000EA684  39 41 00 20 */	addi r10, r1, 0x20
/* 800EF788 000EA688  39 61 00 40 */	addi r11, r1, 0x40
/* 800EF78C 000EA68C  93 EC FF FC */	stw r31, -4(r12)
/* 800EF790 000EA690  7D 1F 43 78 */	mr r31, r8
/* 800EF794 000EA694  39 81 00 60 */	addi r12, r1, 0x60
/* 800EF798 000EA698  80 03 00 00 */	lwz r0, 0(r3)
/* 800EF79C 000EA69C  2C 00 00 00 */	cmpwi r0, 0
/* 800EF7A0 000EA6A0  41 80 00 10 */	blt lbl_800EF7B0
/* 800EF7A4 000EA6A4  38 80 00 00 */	li r4, 0
/* 800EF7A8 000EA6A8  7C 08 20 40 */	cmplw r8, r4
/* 800EF7AC 000EA6AC  40 82 00 0C */	bne lbl_800EF7B8
lbl_800EF7B0:
/* 800EF7B0 000EA6B0  38 60 FC 07 */	li r3, -1017
/* 800EF7B4 000EA6B4  48 00 00 C0 */	b lbl_800EF874
lbl_800EF7B8:
/* 800EF7B8 000EA6B8  54 E0 06 FF */	clrlwi. r0, r7, 0x1b
/* 800EF7BC 000EA6BC  41 82 00 0C */	beq lbl_800EF7C8
/* 800EF7C0 000EA6C0  38 60 FC 07 */	li r3, -1017
/* 800EF7C4 000EA6C4  48 00 00 B0 */	b lbl_800EF874
lbl_800EF7C8:
/* 800EF7C8 000EA6C8  7C 07 20 40 */	cmplw r7, r4
/* 800EF7CC 000EA6CC  90 C1 00 44 */	stw r6, 0x44(r1)
/* 800EF7D0 000EA6D0  90 A1 00 40 */	stw r5, 0x40(r1)
/* 800EF7D4 000EA6D4  40 82 00 48 */	bne lbl_800EF81C
/* 800EF7D8 000EA6D8  38 C0 00 08 */	li r6, 8
/* 800EF7DC 000EA6DC  38 00 00 04 */	li r0, 4
/* 800EF7E0 000EA6E0  90 C1 00 24 */	stw r6, 0x24(r1)
/* 800EF7E4 000EA6E4  7D 47 53 78 */	mr r7, r10
/* 800EF7E8 000EA6E8  38 80 00 12 */	li r4, 0x12
/* 800EF7EC 000EA6EC  38 A0 00 01 */	li r5, 1
/* 800EF7F0 000EA6F0  91 61 00 20 */	stw r11, 0x20(r1)
/* 800EF7F4 000EA6F4  38 C0 00 01 */	li r6, 1
/* 800EF7F8 000EA6F8  91 81 00 28 */	stw r12, 0x28(r1)
/* 800EF7FC 000EA6FC  90 01 00 2C */	stw r0, 0x2c(r1)
/* 800EF800 000EA700  80 63 00 00 */	lwz r3, 0(r3)
/* 800EF804 000EA704  4B FF 5D 35 */	bl IOS_Ioctlv
/* 800EF808 000EA708  2C 03 00 00 */	cmpwi r3, 0
/* 800EF80C 000EA70C  40 82 00 68 */	bne lbl_800EF874
/* 800EF810 000EA710  80 01 00 60 */	lwz r0, 0x60(r1)
/* 800EF814 000EA714  90 1F 00 00 */	stw r0, 0(r31)
/* 800EF818 000EA718  48 00 00 5C */	b lbl_800EF874
lbl_800EF81C:
/* 800EF81C 000EA71C  80 C8 00 00 */	lwz r6, 0(r8)
/* 800EF820 000EA720  2C 06 00 00 */	cmpwi r6, 0
/* 800EF824 000EA724  40 82 00 0C */	bne lbl_800EF830
/* 800EF828 000EA728  38 60 FC 07 */	li r3, -1017
/* 800EF82C 000EA72C  48 00 00 48 */	b lbl_800EF874
lbl_800EF830:
/* 800EF830 000EA730  39 20 00 08 */	li r9, 8
/* 800EF834 000EA734  38 00 00 04 */	li r0, 4
/* 800EF838 000EA738  90 E1 00 30 */	stw r7, 0x30(r1)
/* 800EF83C 000EA73C  7D 47 53 78 */	mr r7, r10
/* 800EF840 000EA740  38 80 00 13 */	li r4, 0x13
/* 800EF844 000EA744  38 A0 00 02 */	li r5, 2
/* 800EF848 000EA748  90 C1 00 60 */	stw r6, 0x60(r1)
/* 800EF84C 000EA74C  38 C0 00 01 */	li r6, 1
/* 800EF850 000EA750  91 61 00 20 */	stw r11, 0x20(r1)
/* 800EF854 000EA754  91 21 00 24 */	stw r9, 0x24(r1)
/* 800EF858 000EA758  91 81 00 28 */	stw r12, 0x28(r1)
/* 800EF85C 000EA75C  90 01 00 2C */	stw r0, 0x2c(r1)
/* 800EF860 000EA760  80 08 00 00 */	lwz r0, 0(r8)
/* 800EF864 000EA764  1C 00 00 D8 */	mulli r0, r0, 0xd8
/* 800EF868 000EA768  90 01 00 34 */	stw r0, 0x34(r1)
/* 800EF86C 000EA76C  80 63 00 00 */	lwz r3, 0(r3)
/* 800EF870 000EA770  4B FF 5C C9 */	bl IOS_Ioctlv
lbl_800EF874:
/* 800EF874 000EA774  81 41 00 00 */	lwz r10, 0(r1)
/* 800EF878 000EA778  80 0A 00 04 */	lwz r0, 4(r10)
/* 800EF87C 000EA77C  83 EA FF FC */	lwz r31, -4(r10)
/* 800EF880 000EA780  7C 08 03 A6 */	mtlr r0
/* 800EF884 000EA784  7D 41 53 78 */	mr r1, r10
/* 800EF888 000EA788  4E 80 00 20 */	blr 

_ES_LaunchTitle:
/* 800EF88C 000EA78C  54 2B 06 FE */	clrlwi r11, r1, 0x1b
/* 800EF890 000EA790  7C 2C 0B 78 */	mr r12, r1
/* 800EF894 000EA794  21 6B FE C0 */	subfic r11, r11, -320
/* 800EF898 000EA798  7C 21 59 6E */	stwux r1, r1, r11
/* 800EF89C 000EA79C  7C 08 02 A6 */	mflr r0
/* 800EF8A0 000EA7A0  90 0C 00 04 */	stw r0, 4(r12)
/* 800EF8A4 000EA7A4  39 21 00 20 */	addi r9, r1, 0x20
/* 800EF8A8 000EA7A8  39 41 00 40 */	addi r10, r1, 0x40
/* 800EF8AC 000EA7AC  80 03 00 00 */	lwz r0, 0(r3)
/* 800EF8B0 000EA7B0  2C 00 00 00 */	cmpwi r0, 0
/* 800EF8B4 000EA7B4  40 80 00 0C */	bge lbl_800EF8C0
/* 800EF8B8 000EA7B8  38 60 FC 07 */	li r3, -1017
/* 800EF8BC 000EA7BC  48 00 00 4C */	b lbl_800EF908
lbl_800EF8C0:
/* 800EF8C0 000EA7C0  54 E0 06 FF */	clrlwi. r0, r7, 0x1b
/* 800EF8C4 000EA7C4  41 82 00 0C */	beq lbl_800EF8D0
/* 800EF8C8 000EA7C8  38 60 FC 07 */	li r3, -1017
/* 800EF8CC 000EA7CC  48 00 00 3C */	b lbl_800EF908
lbl_800EF8D0:
/* 800EF8D0 000EA7D0  39 00 00 08 */	li r8, 8
/* 800EF8D4 000EA7D4  38 00 00 D8 */	li r0, 0xd8
/* 800EF8D8 000EA7D8  90 C1 00 44 */	stw r6, 0x44(r1)
/* 800EF8DC 000EA7DC  38 80 00 08 */	li r4, 8
/* 800EF8E0 000EA7E0  38 C0 00 00 */	li r6, 0
/* 800EF8E4 000EA7E4  90 A1 00 40 */	stw r5, 0x40(r1)
/* 800EF8E8 000EA7E8  38 A0 00 02 */	li r5, 2
/* 800EF8EC 000EA7EC  90 E1 00 28 */	stw r7, 0x28(r1)
/* 800EF8F0 000EA7F0  7D 27 4B 78 */	mr r7, r9
/* 800EF8F4 000EA7F4  91 41 00 20 */	stw r10, 0x20(r1)
/* 800EF8F8 000EA7F8  91 01 00 24 */	stw r8, 0x24(r1)
/* 800EF8FC 000EA7FC  90 01 00 2C */	stw r0, 0x2c(r1)
/* 800EF900 000EA800  80 63 00 00 */	lwz r3, 0(r3)
/* 800EF904 000EA804  4B FF 5D 11 */	bl IOS_IoctlvReboot
lbl_800EF908:
/* 800EF908 000EA808  81 41 00 00 */	lwz r10, 0(r1)
/* 800EF90C 000EA80C  80 0A 00 04 */	lwz r0, 4(r10)
/* 800EF910 000EA810  7C 08 03 A6 */	mtlr r0
/* 800EF914 000EA814  7D 41 53 78 */	mr r1, r10
/* 800EF918 000EA818  4E 80 00 20 */	blr 
