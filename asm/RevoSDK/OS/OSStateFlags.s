.include "macros.inc"

.section .data, "wa"
.balign 0x8
.global lbl_803A9220
lbl_803A9220:
	.string "/title/00000001/00000002/data/state.dat"
    .balign 4

.section .bss, "wa"
StateFlags:
    .balign 32
	.skip 0x20

.section .text, "ax"
.global __OSWriteStateFlags
__OSWriteStateFlags:
/* 800F6CA0 000F1BA0  94 21 FF 60 */	stwu r1, -0xa0(r1)
/* 800F6CA4 000F1BA4  7C 08 02 A6 */	mflr r0
/* 800F6CA8 000F1BA8  7C 64 1B 78 */	mr r4, r3
/* 800F6CAC 000F1BAC  38 A0 00 20 */	li r5, 0x20
/* 800F6CB0 000F1BB0  90 01 00 A4 */	stw r0, 0xa4(r1)
/* 800F6CB4 000F1BB4  93 E1 00 9C */	stw r31, 0x9c(r1)
/* 800F6CB8 000F1BB8  93 C1 00 98 */	stw r30, 0x98(r1)
/* 800F6CBC 000F1BBC  3F C0 80 42 */	lis r30, StateFlags@ha
/* 800F6CC0 000F1BC0  38 7E 0E C0 */	addi r3, r30, StateFlags@l
/* 800F6CC4 000F1BC4  4B F0 D3 3D */	bl memcpy
/* 800F6CC8 000F1BC8  3B FE 0E C0 */	addi r31, r30, 0xec0
/* 800F6CCC 000F1BCC  3C 60 80 3B */	lis r3, lbl_803A9220@ha
/* 800F6CD0 000F1BD0  80 DF 00 04 */	lwz r6, 4(r31)
/* 800F6CD4 000F1BD4  38 63 92 20 */	addi r3, r3, lbl_803A9220@l
/* 800F6CD8 000F1BD8  80 1F 00 08 */	lwz r0, 8(r31)
/* 800F6CDC 000F1BDC  38 81 00 08 */	addi r4, r1, 8
/* 800F6CE0 000F1BE0  38 A0 00 02 */	li r5, 2
/* 800F6CE4 000F1BE4  7C C6 02 14 */	add r6, r6, r0
/* 800F6CE8 000F1BE8  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800F6CEC 000F1BEC  7C C6 02 14 */	add r6, r6, r0
/* 800F6CF0 000F1BF0  80 1F 00 10 */	lwz r0, 0x10(r31)
/* 800F6CF4 000F1BF4  7C C6 02 14 */	add r6, r6, r0
/* 800F6CF8 000F1BF8  80 1F 00 14 */	lwz r0, 0x14(r31)
/* 800F6CFC 000F1BFC  7C C6 02 14 */	add r6, r6, r0
/* 800F6D00 000F1C00  80 1F 00 18 */	lwz r0, 0x18(r31)
/* 800F6D04 000F1C04  7C C6 02 14 */	add r6, r6, r0
/* 800F6D08 000F1C08  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 800F6D0C 000F1C0C  7C C6 02 14 */	add r6, r6, r0
/* 800F6D10 000F1C10  90 DE 0E C0 */	stw r6, 0xec0(r30)
/* 800F6D14 000F1C14  4B FF 30 01 */	bl NANDOpen
/* 800F6D18 000F1C18  2C 03 00 00 */	cmpwi r3, 0
/* 800F6D1C 000F1C1C  40 82 00 44 */	bne lbl_800F6D60
/* 800F6D20 000F1C20  7F E4 FB 78 */	mr r4, r31
/* 800F6D24 000F1C24  38 61 00 08 */	addi r3, r1, 8
/* 800F6D28 000F1C28  38 A0 00 20 */	li r5, 0x20
/* 800F6D2C 000F1C2C  4B FF 23 55 */	bl NANDWrite
/* 800F6D30 000F1C30  28 03 00 20 */	cmplwi r3, 0x20
/* 800F6D34 000F1C34  41 82 00 14 */	beq lbl_800F6D48
/* 800F6D38 000F1C38  38 61 00 08 */	addi r3, r1, 8
/* 800F6D3C 000F1C3C  4B FF 32 59 */	bl NANDClose
/* 800F6D40 000F1C40  38 60 00 00 */	li r3, 0
/* 800F6D44 000F1C44  48 00 00 28 */	b lbl_800F6D6C
lbl_800F6D48:
/* 800F6D48 000F1C48  38 61 00 08 */	addi r3, r1, 8
/* 800F6D4C 000F1C4C  4B FF 32 49 */	bl NANDClose
/* 800F6D50 000F1C50  2C 03 00 00 */	cmpwi r3, 0
/* 800F6D54 000F1C54  41 82 00 14 */	beq lbl_800F6D68
/* 800F6D58 000F1C58  38 60 00 00 */	li r3, 0
/* 800F6D5C 000F1C5C  48 00 00 10 */	b lbl_800F6D6C
lbl_800F6D60:
/* 800F6D60 000F1C60  38 60 00 00 */	li r3, 0
/* 800F6D64 000F1C64  48 00 00 08 */	b lbl_800F6D6C
lbl_800F6D68:
/* 800F6D68 000F1C68  38 60 00 01 */	li r3, 1
lbl_800F6D6C:
/* 800F6D6C 000F1C6C  80 01 00 A4 */	lwz r0, 0xa4(r1)
/* 800F6D70 000F1C70  83 E1 00 9C */	lwz r31, 0x9c(r1)
/* 800F6D74 000F1C74  83 C1 00 98 */	lwz r30, 0x98(r1)
/* 800F6D78 000F1C78  7C 08 03 A6 */	mtlr r0
/* 800F6D7C 000F1C7C  38 21 00 A0 */	addi r1, r1, 0xa0
/* 800F6D80 000F1C80  4E 80 00 20 */	blr 

.global __OSReadStateFlags
__OSReadStateFlags:
/* 800F6D84 000F1C84  94 21 FF 50 */	stwu r1, -0xb0(r1)
/* 800F6D88 000F1C88  7C 08 02 A6 */	mflr r0
/* 800F6D8C 000F1C8C  38 A0 00 01 */	li r5, 1
/* 800F6D90 000F1C90  90 01 00 B4 */	stw r0, 0xb4(r1)
/* 800F6D94 000F1C94  38 81 00 08 */	addi r4, r1, 8
/* 800F6D98 000F1C98  93 E1 00 AC */	stw r31, 0xac(r1)
/* 800F6D9C 000F1C9C  93 C1 00 A8 */	stw r30, 0xa8(r1)
/* 800F6DA0 000F1CA0  93 A1 00 A4 */	stw r29, 0xa4(r1)
/* 800F6DA4 000F1CA4  3F A0 80 3B */	lis r29, lbl_803A9220@ha
/* 800F6DA8 000F1CA8  93 81 00 A0 */	stw r28, 0xa0(r1)
/* 800F6DAC 000F1CAC  7C 7C 1B 78 */	mr r28, r3
/* 800F6DB0 000F1CB0  38 7D 92 20 */	addi r3, r29, lbl_803A9220@l
/* 800F6DB4 000F1CB4  4B FF 2F 61 */	bl NANDOpen
/* 800F6DB8 000F1CB8  2C 03 00 00 */	cmpwi r3, 0
/* 800F6DBC 000F1CBC  40 82 00 4C */	bne lbl_800F6E08
/* 800F6DC0 000F1CC0  3F C0 80 42 */	lis r30, StateFlags@ha
/* 800F6DC4 000F1CC4  38 61 00 08 */	addi r3, r1, 8
/* 800F6DC8 000F1CC8  38 9E 0E C0 */	addi r4, r30, StateFlags@l
/* 800F6DCC 000F1CCC  38 A0 00 20 */	li r5, 0x20
/* 800F6DD0 000F1CD0  4B FF 21 D1 */	bl NANDRead
/* 800F6DD4 000F1CD4  7C 7F 1B 78 */	mr r31, r3
/* 800F6DD8 000F1CD8  38 61 00 08 */	addi r3, r1, 8
/* 800F6DDC 000F1CDC  4B FF 31 B9 */	bl NANDClose
/* 800F6DE0 000F1CE0  28 1F 00 20 */	cmplwi r31, 0x20
/* 800F6DE4 000F1CE4  41 82 00 3C */	beq lbl_800F6E20
/* 800F6DE8 000F1CE8  38 7D 92 20 */	addi r3, r29, -28128
/* 800F6DEC 000F1CEC  4B FF 1F AD */	bl NANDDelete
/* 800F6DF0 000F1CF0  7F 83 E3 78 */	mr r3, r28
/* 800F6DF4 000F1CF4  38 80 00 00 */	li r4, 0
/* 800F6DF8 000F1CF8  38 A0 00 20 */	li r5, 0x20
/* 800F6DFC 000F1CFC  4B F0 D3 09 */	bl memset
/* 800F6E00 000F1D00  38 60 00 00 */	li r3, 0
/* 800F6E04 000F1D04  48 00 00 88 */	b lbl_800F6E8C
lbl_800F6E08:
/* 800F6E08 000F1D08  7F 83 E3 78 */	mr r3, r28
/* 800F6E0C 000F1D0C  38 80 00 00 */	li r4, 0
/* 800F6E10 000F1D10  38 A0 00 20 */	li r5, 0x20
/* 800F6E14 000F1D14  4B F0 D2 F1 */	bl memset
/* 800F6E18 000F1D18  38 60 00 00 */	li r3, 0
/* 800F6E1C 000F1D1C  48 00 00 70 */	b lbl_800F6E8C
lbl_800F6E20:
/* 800F6E20 000F1D20  38 9E 0E C0 */	addi r4, r30, 0xec0
/* 800F6E24 000F1D24  80 1E 0E C0 */	lwz r0, 0xec0(r30)
/* 800F6E28 000F1D28  80 A4 00 04 */	lwz r5, 4(r4)
/* 800F6E2C 000F1D2C  80 64 00 08 */	lwz r3, 8(r4)
/* 800F6E30 000F1D30  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E34 000F1D34  80 64 00 0C */	lwz r3, 0xc(r4)
/* 800F6E38 000F1D38  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E3C 000F1D3C  80 64 00 10 */	lwz r3, 0x10(r4)
/* 800F6E40 000F1D40  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E44 000F1D44  80 64 00 14 */	lwz r3, 0x14(r4)
/* 800F6E48 000F1D48  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E4C 000F1D4C  80 64 00 18 */	lwz r3, 0x18(r4)
/* 800F6E50 000F1D50  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E54 000F1D54  80 64 00 1C */	lwz r3, 0x1c(r4)
/* 800F6E58 000F1D58  7C A5 1A 14 */	add r5, r5, r3
/* 800F6E5C 000F1D5C  7C 00 28 40 */	cmplw r0, r5
/* 800F6E60 000F1D60  41 82 00 1C */	beq lbl_800F6E7C
/* 800F6E64 000F1D64  7F 83 E3 78 */	mr r3, r28
/* 800F6E68 000F1D68  38 80 00 00 */	li r4, 0
/* 800F6E6C 000F1D6C  38 A0 00 20 */	li r5, 0x20
/* 800F6E70 000F1D70  4B F0 D2 95 */	bl memset
/* 800F6E74 000F1D74  38 60 00 00 */	li r3, 0
/* 800F6E78 000F1D78  48 00 00 14 */	b lbl_800F6E8C
lbl_800F6E7C:
/* 800F6E7C 000F1D7C  7F 83 E3 78 */	mr r3, r28
/* 800F6E80 000F1D80  38 A0 00 20 */	li r5, 0x20
/* 800F6E84 000F1D84  4B F0 D1 7D */	bl memcpy
/* 800F6E88 000F1D88  38 60 00 01 */	li r3, 1
lbl_800F6E8C:
/* 800F6E8C 000F1D8C  80 01 00 B4 */	lwz r0, 0xb4(r1)
/* 800F6E90 000F1D90  83 E1 00 AC */	lwz r31, 0xac(r1)
/* 800F6E94 000F1D94  83 C1 00 A8 */	lwz r30, 0xa8(r1)
/* 800F6E98 000F1D98  83 A1 00 A4 */	lwz r29, 0xa4(r1)
/* 800F6E9C 000F1D9C  83 81 00 A0 */	lwz r28, 0xa0(r1)
/* 800F6EA0 000F1DA0  7C 08 03 A6 */	mtlr r0
/* 800F6EA4 000F1DA4  38 21 00 B0 */	addi r1, r1, 0xb0
/* 800F6EA8 000F1DA8  4E 80 00 20 */	blr 
